---
title: API Reference
description: "Complete TypeScript SDK API reference"
---

## Schemas

### CldpmConfig

Root configuration for `cldpm.json`.

```typescript
interface CldpmConfig {
  name: string;
  version: string;      // default: "1.0.0"
  projectsDir: string;  // default: "projects"
  sharedDir: string;    // default: "shared"
}
```

### ProjectConfig

Project configuration for `project.json`.

```typescript
interface ProjectConfig {
  name: string;
  description?: string;
  dependencies: ProjectDependencies;
}

interface ProjectDependencies {
  skills: string[];
  agents: string[];
  hooks: string[];
  rules: string[];
}
```

### ComponentMetadata

Metadata for shared components.

```typescript
interface ComponentMetadata {
  name: string;
  description?: string;
  dependencies: ComponentDependencies;
  [key: string]: unknown;  // Extra fields allowed
}

interface ComponentDependencies {
  skills: string[];
  agents: string[];
  hooks: string[];
  rules: string[];
}
```

### ResolvedComponent

Resolved component information.

```typescript
interface ResolvedComponent {
  name: string;
  type: "shared" | "local";
  sourcePath: string;
  files: string[];
  metadata?: ComponentMetadata;
}
```

### ResolvedProject

Fully resolved project with all components.

```typescript
interface ResolvedProject {
  name: string;
  path: string;
  config: ProjectConfig;
  shared: Record<ComponentType, ResolvedComponent[]>;
  local: Record<ComponentType, ResolvedComponent[]>;
}
```

---

## Config Functions

### loadCldpmConfig

Load `cldpm.json` from a repository root.

```typescript
function loadCldpmConfig(repoRoot: string): Promise<CldpmConfig>
```

**Throws:** Error if `cldpm.json` not found.

---

### saveCldpmConfig

Save `cldpm.json` to a repository root.

```typescript
function saveCldpmConfig(config: CldpmConfig, repoRoot: string): Promise<void>
```

---

### loadProjectConfig

Load `project.json` from a project directory.

```typescript
function loadProjectConfig(projectPath: string): Promise<ProjectConfig>
```

**Throws:** Error if `project.json` not found.

---

### saveProjectConfig

Save `project.json` to a project directory.

```typescript
function saveProjectConfig(
  config: ProjectConfig,
  projectPath: string
): Promise<void>
```

---

### getProjectPath

Get the path to a project by name.

```typescript
function getProjectPath(
  projectName: string,
  repoRoot: string
): Promise<string | null>
```

**Returns:** Project path or `null` if not found.

---

### listProjects

List all projects in a repository.

```typescript
function listProjects(repoRoot: string): Promise<Array<{
  name: string;
  path: string;
  config: ProjectConfig;
}>>
```

---

### loadComponentMetadata

Load metadata for a shared component.

```typescript
function loadComponentMetadata(
  compType: ComponentType,
  compName: string,
  repoRoot: string
): Promise<ComponentMetadata | null>
```

---

### saveComponentMetadata

Save metadata for a shared component.

```typescript
function saveComponentMetadata(
  metadata: ComponentMetadata,
  compType: ComponentType,
  compName: string,
  repoRoot: string
): Promise<void>
```

---

## Resolver Functions

### resolveProject

Resolve a project with all its components.

```typescript
function resolveProject(
  projectNameOrPath: string,
  repoRoot: string
): Promise<ResolvedProject>
```

**Throws:** Error if project not found.

---

### resolveComponent

Resolve a shared component.

```typescript
function resolveComponent(
  compType: ComponentType,
  compName: string,
  sharedDir: string
): Promise<ResolvedComponent | null>
```

---

### resolveLocalComponent

Resolve a local component in a project.

```typescript
function resolveLocalComponent(
  compType: ComponentType,
  compName: string,
  projectPath: string
): Promise<ResolvedComponent | null>
```

---

### listSharedComponents

List all shared components in a repository.

```typescript
function listSharedComponents(
  repoRoot: string
): Promise<Record<ComponentType, string[]>>
```

---

### resolveComponentDependencies

Resolve all dependencies for a component (including transitive).

```typescript
function resolveComponentDependencies(
  compType: ComponentType,
  compName: string,
  repoRoot: string
): Promise<Array<[ComponentType, string]>>
```

---

### getAllDependenciesForComponent

Get all dependencies organized by type.

```typescript
function getAllDependenciesForComponent(
  compType: ComponentType,
  compName: string,
  repoRoot: string
): Promise<Record<ComponentType, string[]>>
```

---

## Linker Functions

### syncProjectLinks

Synchronize all symlinks for a project.

```typescript
function syncProjectLinks(
  projectPath: string,
  repoRoot: string
): Promise<{ created: string[]; missing: string[] }>
```

---

### addComponentLink

Add a single component symlink to a project.

```typescript
function addComponentLink(
  projectPath: string,
  compType: ComponentType,
  compName: string,
  repoRoot: string
): Promise<boolean>
```

---

### removeComponentLink

Remove a component symlink from a project.

```typescript
function removeComponentLink(
  projectPath: string,
  compType: ComponentType,
  compName: string
): Promise<boolean>
```

---

### createSymlink

Create a symlink (low-level).

```typescript
function createSymlink(source: string, target: string): Promise<boolean>
```

---

### removeProjectLinks

Remove all symlinks from a project.

```typescript
function removeProjectLinks(projectPath: string): Promise<void>
```

---

### getLocalComponents

Get all local components in a project.

```typescript
function getLocalComponents(
  projectPath: string
): Promise<Record<ComponentType, string[]>>
```

---

### getSharedComponents

Get all shared (symlinked) components in a project.

```typescript
function getSharedComponents(
  projectPath: string
): Promise<Record<ComponentType, string[]>>
```

---

## Helper Functions

### createCldpmConfig

Create a CldpmConfig with defaults.

```typescript
function createCldpmConfig(
  name: string,
  options?: Partial<Omit<CldpmConfig, "name">>
): CldpmConfig
```

---

### createProjectConfig

Create a ProjectConfig with defaults.

```typescript
function createProjectConfig(
  name: string,
  options?: Partial<Omit<ProjectConfig, "name">>
): ProjectConfig
```

---

### createComponentMetadata

Create ComponentMetadata with defaults.

```typescript
function createComponentMetadata(
  name: string,
  options?: Partial<Omit<ComponentMetadata, "name">>
): ComponentMetadata
```

---

### parseComponentRef

Parse component reference (e.g., "skill:my-skill").

```typescript
function parseComponentRef(ref: string): {
  type: ComponentType | null;
  name: string;
}
```

---

### getSingularType

Get singular form of component type.

```typescript
function getSingularType(type: ComponentType): string
// "skills" -> "skill"
```

---

## Types

### ComponentType

```typescript
type ComponentType = "skills" | "agents" | "hooks" | "rules";
```

### ComponentTypes

```typescript
const ComponentTypes: readonly ["skills", "agents", "hooks", "rules"];
```
